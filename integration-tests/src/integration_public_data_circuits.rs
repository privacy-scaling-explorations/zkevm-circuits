// Public data circuits verifies the things related to public data, such as rlp decoding txlist and
// public data itself. for examplp: rlp decoding, we need to parse fn calldata from every
// proposalBlock call and give txlist bytes to the circuit.

#[cfg(test)]
mod public_data_test {

    use crate::get_client;
    use bus_mapping::{
        circuit_input_builder::{BuilderClient, CircuitsParams, MetaData, ProtocolInstance},
        rpc::BlockNumber,
    };
    use eth_types::{Address, Block as EthBlock, Hash, Transaction};
    use ethers::{
        abi::{Function, Param, ParamType, StateMutability},
        utils::hex,
    };
    use halo2_proofs::{arithmetic::Field, dev::MockProver, halo2curves::bn256::Fr};
    use log::error;
    use std::str::FromStr;
    use testool::{parse_address, parse_hash};
    use zkevm_circuits::{
        taiko_super_circuit::SuperCircuit,
        util::SubCircuit,
        witness::{block_convert, Block},
    };

    /// sepolia protocal address
    const PROTOCOL_ADDRESS: &str = "6375394335f34848b850114b66a49d6f47f2cda8";

    fn filter_proposal_txs(block: &EthBlock<Transaction>) -> Vec<Transaction> {
        let protocal_address = Address::from_str(PROTOCOL_ADDRESS).unwrap();
        block
            .transactions
            .iter()
            .filter(|tx| {
                tx.to
                    .map(|to| {
                        to == protocal_address
                            && tx.input.len() > 4
                            && tx.input[0..4] == [0xef, 0x16, 0xe8, 0x45]
                    })
                    .unwrap_or(false)
            })
            .cloned()
            .collect::<Vec<_>>()
    }

    /// testnet golden touch address
    const GOLDEN_TOUCH_ADDRESS: &str = "0000777735367b36bC9B61C50022d9D0700dB4Ec";

    fn filter_anchor_tx(block: &EthBlock<Transaction>) -> Transaction {
        let protocal_address = Address::from_str(GOLDEN_TOUCH_ADDRESS).unwrap();
        assert!(!block.transactions.is_empty());
        assert!(block.transactions[0].from == protocal_address);
        block.transactions[0].clone()
    }

    // abi: anchor(bytes32 l1Hash, bytes32 l1SignalRoot, uint64 l1Height, uint32 parentGasUsed)
    fn get_anchor_tx_info(tx: &Transaction) -> (Hash, Hash, u64, u32) {
        #[allow(deprecated)]
        let function = Function {
            name: "anchor".to_owned(),
            inputs: vec![
                Param {
                    name: "l1Hash".to_owned(),
                    kind: ParamType::FixedBytes(32),
                    internal_type: None,
                },
                Param {
                    name: "l1SignalRoot".to_owned(),
                    kind: ParamType::FixedBytes(32),
                    internal_type: None,
                },
                Param {
                    name: "l1Height".to_owned(),
                    kind: ParamType::Uint(64),
                    internal_type: None,
                },
                Param {
                    name: "parentGasUsed".to_owned(),
                    kind: ParamType::Uint(32),
                    internal_type: None,
                },
            ],
            outputs: vec![],
            state_mutability: StateMutability::NonPayable,
            #[warn(deprecated)]
            constant: None,
        };

        let input_data = &tx.input[4..]; // Extract the remaining input data
        let decoded_calldata = function.decode_input(input_data).unwrap();

        let l1hash_bytes: [u8; 32] = decoded_calldata[0]
            .clone()
            .into_fixed_bytes()
            .unwrap()
            .try_into()
            .unwrap();
        let l1_sig_root_bytes: [u8; 32] = decoded_calldata[1]
            .clone()
            .into_fixed_bytes()
            .unwrap()
            .try_into()
            .unwrap();
        (
            l1hash_bytes.into(),
            l1_sig_root_bytes.into(),
            decoded_calldata[2].clone().into_uint().unwrap().as_u64(),
            decoded_calldata[3].clone().into_uint().unwrap().as_u32(),
        )
    }

    fn get_txlist_bytes(tx: &Transaction) -> Vec<u8> {
        #[allow(deprecated)]
        let function = Function {
            name: "proposeBlock".to_owned(), // Replace with the function name
            inputs: vec![
                Param {
                    name: "input".to_owned(),
                    kind: ParamType::Bytes,
                    internal_type: None,
                },
                Param {
                    name: "txList".to_owned(),
                    kind: ParamType::Bytes,
                    internal_type: None,
                },
            ],
            outputs: vec![],
            state_mutability: StateMutability::NonPayable,
            #[warn(deprecated)]
            constant: None,
        };

        let input_data = &tx.input[4..]; // Extract the remaining input data
        let decoded_calldata = function.decode_input(input_data).unwrap();
        let txlist: Vec<u8> = decoded_calldata[1].clone().into_bytes().unwrap();
        txlist
    }

    #[tokio::test]
    async fn test_get_txlist_call() {
        let block_num = 3974689;
        let expected_tx_cnt = 4;
        let cli = get_client();
        let block = cli
            .get_block_by_number(BlockNumber::from(block_num))
            .await
            .unwrap();
        let proposal_txs = filter_proposal_txs(&block);
        assert_eq!(proposal_txs.len(), expected_tx_cnt);

        let txlist_bytes = get_txlist_bytes(&proposal_txs[2]);

        let expected_txlist_bytes = hex::decode("f95973b90c3a02f90c3683028c5d8268e884600d0e6a84600d0e6c830748229421561e1c1c64e18ab02654f365f3b0f7509d948180b90bc4fee99b22000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000003e000000000000000000000000000000000000000000000000
0000000000000697c00000000000000000000000010007777000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000028c5e0000000000000000000000000000000000000000000000000000000000028c5d00000000000000000000000029c5dc4a469f868df9b799ef3c282a5883b06c9b000000000000000000000000d90d8e85d0472ebc61267ecbba544252b719745200000000
000000000000000029c5dc4a469f868df9b799ef3c282a5883b06c9b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064c2f256035a000000000000000000000000000000000000000000000000000000000002fe9a0000000000000000000000000000000000
00000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000001a40c6fab82000000000000000000000000000000000000000000000000000000000000008000000000000000000000000029c5dc4a469f868df9b799ef3c282a5883b06c9b00000000000000000000000029c5dc4a469f868df9b799ef3c
282a5883b06c9b0000000000000000000000000000000000000000000000001bc16d674ec800000000000000000000000000000000000000000000000000000000000000028c5d000000000000000000000000a4505bb7aa37c2b68cfbc92105d10100220748eb000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000a000000000000
000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000005484f5253450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020486f72736520546f6b656e2862726964676564f09f8c88313131353531313129000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000010a6e000000000000000000000000000000000000000000000000000000000000004000000
00000000000000000000000000000000000000000000000000000000740f9073db90214f90211a02e91ba3bd063a422cbc28960e743b9448a00effe80042f0e07656e389742041ca0df196dba0aa2426f8c837453c63ddc9114c0e9c4a0bdcd96808a9a63a24112e1a0f43ed1910069311b37e82a60198754127c83d40fa90c06bd33116b2377ac46b8a0b48c779661a4e26a469e0a6ce74917dcfe480a26618604b94a68a4254c8c3ab1a012
068fc2569e3c9c76ac8922c10d66aa9e35a10bc1e872e864fd0c5efe58c0c2a0d4269b4f247d816997e2bc6d5676a835d78e75181eef4bbc33635e87f7a449ffa05168fa450fa16b816f66a25fc81ed8aec8edc9c700b384d37888c9ca5333d1e7a056870c34fe499a799e2c17ef1dfd853c8ad899f99ca48c3bccb0314ee6dab6a9a007ba939ebdbd87b326f21608adc89a1a247fef71303cf6826a152aca6a8530cda0694effd84f6027b4b
10482300e8072dced529363d04905d73a5f4cd642fc06e1a00c7732f3ff2b9cc971f13553844c70464e070c6df735f69153aa3955007d9b46a08975d3ce49ca45251d886d356ccf2699bf803e101fbe3106654b9459070312eea0f769d53d52ca93381f3fc079d70736bb31a1fdff72e389108ee05d249f3745d7a0a110c662aeffe1a6724b3b3e04c80d18c06dd07ff95c0c2a90af899cdcc9af50a0e5d4c5c2baef9cd629625c5dbac6df2e
f305425ffd6d75d149d9108110cb5eaca05344b5be262bc99488b4eeef5c08124254d135d8c44e3b66cbe52d69a9c1dde680b90214f90211a081cf2dd29328b7f941d16ae32a97235de5c52cb67fb7cf506a417e9512d5d92aa0f8c009ebd8872218b3c962ea4b6f26289e74cf5a2699c44638634492ed44061ca04af60fe0d1c3e5ba311b9096502358214e295ece76fe9a87be787342d291bc1aa02ff67efe95fcbe65bfb6c6a54f7b52481
ee9b15a71db428dccbea92a59a7e91ea0ffb9a2121cec680dcc4b906fde38054b8d28c7722f237b8bc4419cb156e00aeea090ff0514d23b6a440883af684314ac252fd40f0965ed00ee32ede850ac939aa6a08316fa9f9fb116b797303c9f59bfcbfd6eab1e860ddce183f8890d39eb463c17a00e68e684671a7a8a6c88caa785c05b813ed9f9cb899ef52962ec02cc7adfef1ea03d2eb0a315e77755786dce09b9a7a861883aa6a69466bae1
3ddfd911ecd0b613a0c0eeae4bec36475d5f0cebe4d0faaeea3d38f55dca06138bd971e737b72bf949a0c9c8174c3c9894d24438a008430534a85ce6f5e12965405f41fbe6ff1bb8a669a0a463c0ec5eca233abbf82eb463a35847e0b38f6355285ac05dfc699c6bf66f4fa02858c3b04dba4aaa7140e4c817cf3484115b40f65cfc1ed51f5eca6c4e5e73bea0d7d4321b4be9b929794055ecd81d662771a99af9b580f31fbfc884f33961342
fa0099acebc3d3e9ca08b54bab1e77945b0f1e6a9ab8e4809fd4863327e006cf033a0dfbd721474a535c28621da4efaf99bee9ab4b0989cb8b9f4a30be6247304c25e80b90214f90211a0ae26b80e2d9067499171c24cc3be48f6c41c2b4f2028aeea608f1e0fd3606fb0a075787e6d9021be3a2f63c9255a90cc75cd05e1f21ef4a736313f72aafb07c16ba0889cd1deed9f9c6d9e3a2bd58f6b96673ca474f2bdb65c8caf71f22847a240ee
a0a79f7f8c911fd1ae7de75022dac0a49360815d0a741e1dd778c180f1311cc87ca056a26581dbc0f3daa304834fcb978045aec174ec1536a72d6181cfcef559b968a043fb708c4261f73c38fc4890189b36b58b729fd07192af78899f5d4e1e0379f9a0cb0a8ae3dcdd1ded62ece35d1ac0b631bbd1655c6ee6d69bbcb3dca8d4008879a065570bea646ce87b8ac97a50f35dad070307692d7402cf390da62eeeb2a1d55ca04b53e9468e88c
5b9aa1943b174fc5d49ee758ae9468a7639442235af3834912ca032ea978ff4df0f8ff345244adb7daec5593de30e24117cfbc594ebee85d4dfcfa093612a1e511f3be608a955908a10d6350b348f5ead3de89aaf48ee22d2d33258a0eab8686a6c7e52b82b10088aaf165ac537dbfdc6ce37a43e00710b5b3f0582d9a0b60a9ef9bb5a185dc100c704da8548ffe3b7fdfec8ca3c4121b9b539bc56d0c6a0df78eafe624d0a2cb96557cb6bcc
5fb21222af3ee8c8dc2617fae8498c6b4c61a0e3b68029b14011a222830e33d53ec8065c522b2cdd67896b41c83bd547433e2ba0fecda20e16b791bcf176cde0c4cbe60ae759ec706d6c0055b6a71410ba9ebab180b8d3f8d1a0fdd8a891c287aae9e4cbd868a0cbe53feefb96e5b387041e28dfc707bd759a0d808080a0a8f0ff000885680e44015f3215829b6f8af1cb0f7445d0cabcfe7d8387e1b78f808080a090ed5f92777d6f7ac5ffb
2d982792995886eceb10e257a2b09bae0705fb506aea0a9e934c198ec5886a797823cea848d007fad31687d940ed0e52732df0cf86d9480a0aaf08f237a2139e94e05a3236ea0c306e86126ed934a0070bbedf5132b96a750a0ed59a77591252f5835be6509bf255fe10429b171650b52a30002cdc987c635e880808080a2e19f2067267597732efd0ec9af537c074e5da380ed9b91db3a2a06ee4867afb05001c080a0f4d3b61210d7ce6193
02da3cff305cbc2af33899253a85c91481d3e60f95b02ea0250289c9fa49086ffceddc706997fc17b7f5d7173008edb1d8f03249fa45413db90cba02f90cb683028c5d8268e984600d0e6a84600d0e6c83077e6a9421561e1c1c64e18ab02654f365f3b0f7509d948180b90c44fee99b2200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000
0000003e0000000000000000000000000000000000000000000000000000000000000698600000000000000000000000010007777000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000028c5e0000000000000000000000000000000000000000000000000000000000028c5d000000000000000000000000af97750ff89343372a806a25449d822bf720becf0000000000000000
00000000d90d8e85d0472ebc61267ecbba544252b7197452000000000000000000000000af97750ff89343372a806a25449d822bf720becf0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064c2f256035a000000000000000000000000000000000000000000
000000000000000002fe9a000000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000001a40c6fab820000000000000000000000000000000000000000000000000000000000000080000000000000000000000000af97750ff89343372a806a25449d822bf7
20becf000000000000000000000000af97750ff89343372a806a25449d822bf720becf0000000000000000000000000000000000000000000000004563918244f400000000000000000000000000000000000000000000000000000000000000028c5d0000000000000000000000006302744962a0578e814c675b40909e64d9966b0d00000000000000000000000000000000000000000000000000000000000000120000000000000000000
0000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000003424c4c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f42756c6c20546f6b656e2862726964676564f09f8c88
31313135353131312900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000084000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000010a6e0000000000000
00000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000007b4f907b1b90214f90211a02e91ba3bd063a422cbc28960e743b9448a00effe80042f0e07656e389742041ca0df196dba0aa2426f8c837453c63ddc9114c0e9c4a0bdcd96808a9a63a24112e1a0f43ed1910069311b37e82a60198754127c83d40fa90c06bd33116b2377ac46b8a0b48c779661a4
e26a469e0a6ce74917dcfe480a26618604b94a68a4254c8c3ab1a012068fc2569e3c9c76ac8922c10d66aa9e35a10bc1e872e864fd0c5efe58c0c2a0d4269b4f247d816997e2bc6d5676a835d78e75181eef4bbc33635e87f7a449ffa05168fa450fa16b816f66a25fc81ed8aec8edc9c700b384d37888c9ca5333d1e7a056870c34fe499a799e2c17ef1dfd853c8ad899f99ca48c3bccb0314ee6dab6a9a007ba939ebdbd87b326f21608adc
89a1a247fef71303cf6826a152aca6a8530cda0694effd84f6027b4b10482300e8072dced529363d04905d73a5f4cd642fc06e1a00c7732f3ff2b9cc971f13553844c70464e070c6df735f69153aa3955007d9b46a08975d3ce49ca45251d886d356ccf2699bf803e101fbe3106654b9459070312eea0f769d53d52ca93381f3fc079d70736bb31a1fdff72e389108ee05d249f3745d7a0a110c662aeffe1a6724b3b3e04c80d18c06dd07ff9
5c0c2a90af899cdcc9af50a0e5d4c5c2baef9cd629625c5dbac6df2ef305425ffd6d75d149d9108110cb5eaca05344b5be262bc99488b4eeef5c08124254d135d8c44e3b66cbe52d69a9c1dde680b90214f90211a0c297f46fd4f78f711ba14896eb8ee6dfe186465001533b683f4099d179f00011a07bbfe9e591a958e677663009af4c8a195da1e3afa5fa61102e79dc2303dfead9a0b35378f3f82a924a2202b79c52c0b407e239c811a88
8e6bcbaf3df333641cfd6a0060613af642a9392bbeb94031b6ffd88b3e91f22a48b4988b5c4b6ccb4b449e9a0ed3dc5922314e262d1e959c58a7307576572d421e467152bdee204915e113234a0b5f2d1589bd6c9c5551005abd77ab5d2d9b420dca22183773ab72723b2e83e63a0bff76e11ddbede923ee2a74d8b3a4abd7df1c3425ebf9b6c1be970569faedd9aa0992f02205aa8292651eb53be504b4725fed9eef8860e31d4440a941b3d
864084a02316359ecc59ed6057923669d0f3877d605661487c01f144f493fbf862ff6d78a07e4349bd668348e56c85648287869ef2eff3a8e5c4f95d081c8d4a0251d328c0a09e8762b4120561f496408310f545f0eff01a76295829ac9fa8cb403ecee5ee2aa0b551faa6ac8eab05e9e4e2bdf5e7039807cf9d8fb61d74d85e3bae166755dc83a0f2bc8174d34965dc52655fc027aa1e7a84d9eec9555e9b57f4fdc483a5917f89a0e7ae2b2
558631ff9515900d61856eeb21ad0eec07c46f1aa66415b1452791f8da04321debc441222778f06c3b34ff916d94d863851b18e271dc4c8405dcd384579a0cb36e2e797ab813b9a47192382d50a90924bd8784f6c7a334dd8dfa3386813a080b90214f90211a09f1c0074551907b72d1b19bd9f78305a156333ce5142443ff3b38d42a452ea05a0269c3b1529ddd27cd01258a9b632a2843d3607a79bc873e3a1cc9af144d57329a05db70209
2065612996b305e3ac2722b86950b22dc766a95e8c4d5e8d650ee0eda01cf4376cc72305d4b15406dbcfe1faebe84d1b7c2e187af601b1eeafad4cb018a05cc84a68e65c5b249e4a05fefc30faddc730650102b7e053e068ff49795eda8ba06b832ed3a02da2d8203579e401cfa233d624d6ca41999f1ad9b9516baf2c07b8a0e37a8257c88b77a7e5592bd6df1a9ee5444d91759c9d595a50d80dbed14379cfa059424d766f6f74ec52d7386
ee4df09f5f227efa0405408fdd7ed2723d7456e34a003be739fd866f3d68243bef04a67f0d6a69cfec5e74190fb1e8552208d4c94c5a025fa40037c55ae660b2866183765181ff94fd8f4781690592b47a87e9d9c8cb1a0eeeaaf733dbadb6ed03e5b488d2669c71c527fc6880614ea534fba7eb2935088a0eceb6a4f877a4809c0576ad1aa95b710ed386932d83f53e890e7cc5a1a6afcdca06f213d484fbaa85113a0753ac8bb16c9460d8e
b9f1511824d76c843035d4dd8ca04b36a0699b026ef23e89cd5409240afb725c1bb9944ef8be671fefb0b5e0bbaba091b671c3744b5c97936555d7f046804a1fd44cb847d72ee3df361cfbe09f52a8a0999f893a468e1a93d0e9248f302a9e02296ee564ff6edec2cca598bd46500f6880b8f3f8f18080a070bb8d99831823a53b78058a4165334b893d9aeafb57bbcaed295f78741769708080a0a163fe873a3c83bb6c8ae121421b1a66a3e
3a08d77ffdb5350f2c294bd8a1341a0a14abdb71101d4633aa66b57094373909848ecd7d457bd6e62e3b77b0e7e6c0f80a02b1ea498bcae1dc60fda1485e98702f1bb542249c0277e4d70ab3bc6217c3a5ea0d53b2b578aed975a49ff26b3d226563dd976ad35f9bd589076eba03cea7d81e3a0d2f4cd0313f379a65aba84664c4cbbf81417df7d8536af938a5477aa74459bbea06b2760f7bdd4a3018f6b612c345cb6e279eb221c85a9b04b
6a3b8b733ff0a3eb8080808080b853f85180a084de0ea70ca4a841c1c5d72de2f89e6f4dbbcb4916099a1540f43591f3041ba1808080808080a0c8aee26b5a8350e3a9c63a779ef687355bfbd65b517eecaf9b31c8f42663b69d8080808080808080a1e09e35fe41cd468fe8c85ad954ad325ef07f85fc3a0a9d45a532686369049d4401000000000000000000000000c001a07eee04680a5b8d27f38b87388f5e0a56304d174aad6dd30b14c
75883a80b45c8a070345903a748255f10c4609cc0688b017635f350765401ead21472dbc003a1b0b90c3a02f90c3683028c5d8268ea84600d0e6a84600d0e6c8307048e9421561e1c1c64e18ab02654f365f3b0f7509d948180b90bc4fee99b22000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000003e0000000000000000000000000
000000000000000000000000000000000000698100000000000000000000000010007777000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000028c5e0000000000000000000000000000000000000000000000000000000000028c5d000000000000000000000000aeb568e039d96e486cfc9fe9bd41c5b6c1a0b445000000000000000000000000d90d8e85d0472ebc61267ecbb
a544252b7197452000000000000000000000000aeb568e039d96e486cfc9fe9bd41c5b6c1a0b4450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064c2f256035a000000000000000000000000000000000000000000000000000000000002fe9a00000000000
0000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000001a40c6fab820000000000000000000000000000000000000000000000000000000000000080000000000000000000000000aeb568e039d96e486cfc9fe9bd41c5b6c1a0b445000000000000000000000000aeb
568e039d96e486cfc9fe9bd41c5b6c1a0b4450000000000000000000000000000000000000000000000004563918244f400000000000000000000000000000000000000000000000000000000000000028c5d0000000000000000000000006302744962a0578e814c675b40909e64d9966b0d00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000
0000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000003424c4c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f42756c6c20546f6b656e2862726964676564f09f8c88313131353531313129000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000010a6e0000000000000000000000000000000000000000000000
0000000000000000400000000000000000000000000000000000000000000000000000000000000740f9073db90214f90211a02e91ba3bd063a422cbc28960e743b9448a00effe80042f0e07656e389742041ca0df196dba0aa2426f8c837453c63ddc9114c0e9c4a0bdcd96808a9a63a24112e1a0f43ed1910069311b37e82a60198754127c83d40fa90c06bd33116b2377ac46b8a0b48c779661a4e26a469e0a6ce74917dcfe480a2661860
4b94a68a4254c8c3ab1a012068fc2569e3c9c76ac8922c10d66aa9e35a10bc1e872e864fd0c5efe58c0c2a0d4269b4f247d816997e2bc6d5676a835d78e75181eef4bbc33635e87f7a449ffa05168fa450fa16b816f66a25fc81ed8aec8edc9c700b384d37888c9ca5333d1e7a056870c34fe499a799e2c17ef1dfd853c8ad899f99ca48c3bccb0314ee6dab6a9a007ba939ebdbd87b326f21608adc89a1a247fef71303cf6826a152aca6a85
30cda0694effd84f6027b4b10482300e8072dced529363d04905d73a5f4cd642fc06e1a00c7732f3ff2b9cc971f13553844c70464e070c6df735f69153aa3955007d9b46a08975d3ce49ca45251d886d356ccf2699bf803e101fbe3106654b9459070312eea0f769d53d52ca93381f3fc079d70736bb31a1fdff72e389108ee05d249f3745d7a0a110c662aeffe1a6724b3b3e04c80d18c06dd07ff95c0c2a90af899cdcc9af50a0e5d4c5c2b
aef9cd629625c5dbac6df2ef305425ffd6d75d149d9108110cb5eaca05344b5be262bc99488b4eeef5c08124254d135d8c44e3b66cbe52d69a9c1dde680b90214f90211a025401314bc7cf356618cfd2b9a1bbbca862fb81349ffefd76bc8727d3fdf4b6ea02d0e1ddb8090f1987722044adc0a2c7d79909aef54f53b38257999a9c924f88ca0294d1315961464dc9fdd1b9451eb624fbdc32a4a8e5c2f65a3a66aee78461d44a08fceafe087
895a5c686ea8f887ba236da4d74bbd3564fac0ccc8f552965f2c21a087697e6ec5997f1b06d94093448b1ed800a352f8b6a91a28731fe0af70f345b7a0cfd35d3052688b58b77a1ae69823f421c8d7cb4cb51a19ebb24204e93f070d4ba0b75a5f17a972a52728f47d69b3ed870b5c07c2d87a142b6f8b1ac6618dfb6aeba083d3ec2683c5779dae206306432e8c27d037791079e864b9ca2f97048e9da35aa069714eb6a9c3f608bef489e25
55ab808cf3e496feac5a3a613d6457901cbee9ca03a30108f0c3687132abf966308a82fa67143ca065d9a36be06e6f6af480eaaeda03cdb8e6c4bf0663518377b30b8be387f26c29d2e5bb2c75e52be87f2b2632ae3a0349ecaa10281189e126bc50dfa639f63445f96ca6ee007ec6e902f757482fd48a02a4a55b20a6ce58cad1b8d57bdbfdc6c1928373777873d71efe5cbb456b3c868a0824b735079010890781552a42fb601ef51d603a5
63d3e2cbdc2f7f695ce95f87a08f4f2d850f3f32b52c227e0b0ab4ab3ab8d7d9450b4e08a468772ae4b7d6bf91a080eb28fc341aa07059c020154ecbfe5c7ec7b08ce7be4e53cb523368d5afe38680b90214f90211a09af0fc2d3fa91845b90bd8b2d6459887d5ad6db893018e33e5a2bd50ba5ddb26a09e90db8a284a826266ae51e31510dec55465a8bb70615568b007c87eb8dd0ad5a02f7e7f47ab6a0b7611fbc2aaeb31526b9abdc0e89
6f154d60b29a2f34424a921a079d4063ef645ac310f1084ad32489670761007a35dbaa7c5c8d5140ce820e119a0438048a416facab98dd8086b3ddc4b8a5824bae4f89c28f204aa091df462040da02927ede835f62aa61fa7f17af1e8e42113c614f2bb293f7632cd07c49e249bfea039963b187842ad493272dfa2ae407181834b8194e279922450b5373e5b83d35da0d1dec95361a5f15eea7ff3de6859e0ebf720a5045db7489d38cd78e3
662aa99ca052c719bc9e7fbe7e0fe80a4345fd6e68c231f170d83bead832713f141a26e4bda0567beb3012a49768454ce0870fca13fbd91b80aa9fb7ccfb619de47e22801984a095625587baeaa21be954b3ea5f163337f478ff21b09dabfac0d676bf52801a03a0749ee53104184a91ed9e2e348196ef81665c5d51c5335e2ccf72dec5d9d0f796a052e8209b57dd1084a2bf801af4ce3f79309e50afc5cf89fae3e86354f4f56efda02e75c
58735e01aea86ff463a044c588fe341ee1664bdea2ad7a6397969edb960a066f0d89fe867075f0401bb4d28a464ec5009c3e77487e06c4a7ccd9a97975b72a04fff6b8d3967249226e8ef6eec7b154ecaf83dc16c004ea6db7c8fedd1a6b9c280b8d3f8d1a0c30fd9f828b76938616cfe660a786d191c01147b33e137b1d79edfe046282967a0d67d7aa8df9670c0ca22de61ef8e540a5b15be51dc112a90eb254cd4190d50df8080a0810110
d2b05a539f7024d8fa558f3c8614010dcdb0097af4230c3a284e35673880808080808080a0e73b32f1a777e4f3f344391887ddb37ff6c24e9f4e533f97c70c7d7c794e215e80a0bbf4f8f0748731871d4cbb1b01e92cfda2f782849f7ead650e8299ebc165b0c7a07456bbdc2cf727a7cecade48f6d8377f21e8ce6cb219d3d176df782f414e512380a2e19f200aa4550941598b1c71ed7f6cd6f90582cf133ca886b9b3bd36a22a6c729201c
001a0e468ca84c3ad9caedf259e2c83e12c477b5a1a460c02853a0c03acef65584235a065dfd2fa6aa14fb6510bdd9d8b728b247e152aab82a2c2f3bdeaf5fd58416f8db90a9a02f90a9683028c5d8268eb84600d0e6a84600d0e6c83064daf9421561e1c1c64e18ab02654f365f3b0f7509d948180b90a24fee99b22000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000
000000000000000000000000000002200000000000000000000000000000000000000000000000000000000000006984000000000000000000000000079589506ae7c37df8de3164946f2505fd8ee2110000000000000000000000000000000000000000000000000000000000028c5e0000000000000000000000000000000000000000000000000000000000028c5d000000000000000000000000079589506ae7c37df8de3164946f2505f
d8ee211000000000000000000000000079589506ae7c37df8de3164946f2505fd8ee211000000000000000000000000079589506ae7c37df8de3164946f2505fd8ee211000000000000000000000000000000000000000000000000002386f26fc1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005270f4d202be0000000000000000000
00000000000000000000000000000000000000000222e000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000007e000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000010a6e00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000760f9075db90214f90211a02e91ba3bd063a422cbc28960e743b9448a00effe80042f0e
07656e389742041ca0df196dba0aa2426f8c837453c63ddc9114c0e9c4a0bdcd96808a9a63a24112e1a0f43ed1910069311b37e82a60198754127c83d40fa90c06bd33116b2377ac46b8a0b48c779661a4e26a469e0a6ce74917dcfe480a26618604b94a68a4254c8c3ab1a012068fc2569e3c9c76ac8922c10d66aa9e35a10bc1e872e864fd0c5efe58c0c2a0d4269b4f247d816997e2bc6d5676a835d78e75181eef4bbc33635e87f7a449f
fa05168fa450fa16b816f66a25fc81ed8aec8edc9c700b384d37888c9ca5333d1e7a056870c34fe499a799e2c17ef1dfd853c8ad899f99ca48c3bccb0314ee6dab6a9a007ba939ebdbd87b326f21608adc89a1a247fef71303cf6826a152aca6a8530cda0694effd84f6027b4b10482300e8072dced529363d04905d73a5f4cd642fc06e1a00c7732f3ff2b9cc971f13553844c70464e070c6df735f69153aa3955007d9b46a08975d3ce49ca
45251d886d356ccf2699bf803e101fbe3106654b9459070312eea0f769d53d52ca93381f3fc079d70736bb31a1fdff72e389108ee05d249f3745d7a0a110c662aeffe1a6724b3b3e04c80d18c06dd07ff95c0c2a90af899cdcc9af50a0e5d4c5c2baef9cd629625c5dbac6df2ef305425ffd6d75d149d9108110cb5eaca05344b5be262bc99488b4eeef5c08124254d135d8c44e3b66cbe52d69a9c1dde680b90214f90211a04b2c5f9b2f663
c732fd67a8e5962c2ddc64bd15396ecddbaba1768f787b0d2f3a0e1a556feeb4e5b36d27b97ec7f4902950e26202e0775bc2d4c126c4b4a656102a0b2d924982fbf25d153d91a9a91aaee8a8c084227ff22af1418b5cc10ebbcd063a0873455668ab3aefc6a3dfaa2cc64d10e6a74875c24929f16cf2bafec051f57d2a0d69cbfa5bd51192f9ba655e78402c607b837864f2525562dfab94eacd7e346f0a028c4b08982593e0d1626e6e74869
7c815ddd8d92b236d989ee65805e028d86c7a050f014f9ea6e8e778508bdd1e6d3b28144a7918a716f90aa016e390367e78875a0f6e18d6250a1d9961aa1b9c3a453fb105d9759eca8f2cefa122361bf65de1f1fa02df17be9a29e970293d11526b450c52c0ed35631088680f8d279b313d8c5d6c0a057f23e5996729119f9cd3bfd9e9247332c2a6bd8329455d9d4ec242783a2ced6a06f7c091d4f6b462f54f6ff39adf029bd2852cea0793
30200eb629fe2b9e5c025a0a4f1fd17f5167d0778260a9e4221d4481a209e4215242deed910d9f9e5e96b4ba03e22d89063305cebf746ec5341f8ad2c94e1265b526a35e6ea478c883bd10c4aa05ee9aa49d4f778315e725771a1d187348d9262930e4ba6399d7302ec0c2bf1daa022ec160781b1bb96221517f0cada2191374c127c21295089c761e0aefeda5859a0049b80f4612e9465f67bdf2e5424c526d51447d418f30ae2ca9b376eca
34b1b480b90214f90211a03459c712946ba06b5bbe712b8e73a75e07754af6f679a018ee2df50423e0a1a2a0ba84def0f6755e281449364f87a21929b9b342e55dd997808568ccba333b5c57a01433e8cb8b2d333aab16fbc15f4f151831d5275c2683a6e5cc1c7ecff7ea9848a025a4c02e1a49ca696e4be0272824bb55e98d288ab1271aef326b5afffa6d256da094950f1230e879e320351274b7d881993456017c486e587793cab39ecc4
b592aa065335dd6af3d79d69ca135960076da40e73f0b95697098379ea396b2c1c36b0ea034be47661172f812bf047c806f24032b8f6048c115cbd436fff3b8b1b3b26eeca046efd9ad15a0a8902df7666c2256ef59a407bb8e8e089aff21e2fad52b3fadc8a025971fe4074ade021a3a898b9dd16f6e626cd7aebc6c1b5b6349af4703c8d8b4a0b4963c4e36d70a72db9f754bf1551f4623e56cf49e29cee86e9a69dab906b142a0291fd87d
7993fccbfb18ce5356e5d8ab415524fd8d8e455738dc884f093ba332a06098cfe17209f24917b35bd06e62752848cc8594d84a64084ed1c2c792a40695a03a8c932ba123cebb4c6e6407481c6c87b9b39e87d55cf0feb120ee502d4f3f1ea05fe22988d9eb0d751fcc05c80602d885a0d615f7e0054bfbc39c2d02d2c2813aa05f95c850ef84f2a4386f855e2ad643b432180c3f1ebcb570077b1c3af8ce81afa0b92fc0144577f54c2e28564
1d86652f73e57d79e0a44edaf08f6083287c1d43d80b8f3f8f180a0e7bd6cca8791c3851c40a683c10aacd8e67a3cd9e1c0f762f373fb0ed36a6190a0d517e0badd4b9b8851ec0f88554ab72a5534c729c4259c536b886870829a80ada02658815da5fb2f2f0f14a8582c829290d94b6f4b1ce31840b98b37e6d1e3340580a0c0bd6f18b2d3396224967aa0d9ac59c83692401ac79ed82446023c34cff8c3f9a0805499d94f73ad915cb24b0f
873703ec0118f020f5ba7d293eb3b45ec8864d4fa0b594261c81562f678c0ee0fb243391c73e00632e04f5f30c3d63d1919014fc4a80808080808080a08bd3a872d621e21a2f5bdb1915312d1c50e6f2006a89c30ce94f10d31175ae8180a2e19f20e1a301992cc61d5fc6d9dd467fb7d26c992dfb7df6d55ee4849d58ed537701c001a00714dcf5aa13da2ce0b72e7b91ef1c59cfd2089ae3c4831931aec79cf6ac3640a0485d48d4dc5b08a
ccb0122cf0eb594b8015d82aa083c1e38738bc9f1fb672680b90cfa02f90cf683028c5d8268ec84600d0e6a84600d0e6c8307118c9421561e1c1c64e18ab02654f365f3b0f7509d948180b90c84fee99b22000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000003e0000000000000000000000000000000000000000000000000000000
000000698300000000000000000000000010007777000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000028c5e0000000000000000000000000000000000000000000000000000000000028c5d000000000000000000000000c890453d600d546a37c450cdc49d774ad97160b8000000000000000000000000d90d8e85d0472ebc61267ecbba544252b7197452000000000000000
000000000c890453d600d546a37c450cdc49d774ad97160b80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064c2f256035a000000000000000000000000000000000000000000000000000000000002fe9a00000000000000000000000000000000000000000
0000000000000000000001a0000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000001a40c6fab820000000000000000000000000000000000000000000000000000000000000080000000000000000000000000c890453d600d546a37c450cdc49d774ad97160b8000000000000000000000000c890453d600d546a37c450cdc49d774ad
97160b80000000000000000000000000000000000000000000000015af1d78b58c400000000000000000000000000000000000000000000000000000000000000028c5d000000000000000000000000a4505bb7aa37c2b68cfbc92105d10100220748eb000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000a0000000000000000000
00000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000005484f5253450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020486f72736520546f6b656e2862726964676564f09f8c883131313535313131290000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000010a6e0000000000000000000000000000000000000000000000000000000000000040000000000000
00000000000000000000000000000000000000000000000007e2f907dfb90214f90211a02e91ba3bd063a422cbc28960e743b9448a00effe80042f0e07656e389742041ca0df196dba0aa2426f8c837453c63ddc9114c0e9c4a0bdcd96808a9a63a24112e1a0f43ed1910069311b37e82a60198754127c83d40fa90c06bd33116b2377ac46b8a0b48c779661a4e26a469e0a6ce74917dcfe480a26618604b94a68a4254c8c3ab1a012068fc25
69e3c9c76ac8922c10d66aa9e35a10bc1e872e864fd0c5efe58c0c2a0d4269b4f247d816997e2bc6d5676a835d78e75181eef4bbc33635e87f7a449ffa05168fa450fa16b816f66a25fc81ed8aec8edc9c700b384d37888c9ca5333d1e7a056870c34fe499a799e2c17ef1dfd853c8ad899f99ca48c3bccb0314ee6dab6a9a007ba939ebdbd87b326f21608adc89a1a247fef71303cf6826a152aca6a8530cda0694effd84f6027b4b1048230
0e8072dced529363d04905d73a5f4cd642fc06e1a00c7732f3ff2b9cc971f13553844c70464e070c6df735f69153aa3955007d9b46a08975d3ce49ca45251d886d356ccf2699bf803e101fbe3106654b9459070312eea0f769d53d52ca93381f3fc079d70736bb31a1fdff72e389108ee05d249f3745d7a0a110c662aeffe1a6724b3b3e04c80d18c06dd07ff95c0c2a90af899cdcc9af50a0e5d4c5c2baef9cd629625c5dbac6df2ef305425
ffd6d75d149d9108110cb5eaca05344b5be262bc99488b4eeef5c08124254d135d8c44e3b66cbe52d69a9c1dde680b90214f90211a0fc9ab77ec508d9c949918c2f6afe3375326c8a7783e62b0730749fc3af3cb6b6a04d3660a521caaf3e682eb4afb73b6aa276fc0ee379002037d90c8a91db31111fa0bd389bfff7ecbf45294289230857d77b99572364182c8ac756aab28bf9838619a0c7dee71199d2490e00c574a741ca78acd8a2aef0
adb47c5036930d8b86c3fbfea08b62847363f6c2e77e3b57386388824b17aaaf8151da8ac5b824620789d92e1ca012075ae21b2317d11fd4d174a4db03a3d908d8968e95d6f7cd57165040879caaa0fa9cb4b3dcf18f38f2d45cd12491fb2cd05d4301884280c46988f5a64771301ba094c46def1ac313d130774ccaa6dc5b4df63038de7af8bb8d0e34734c4cb88f4ba0779fc5b5dd317bd3b2cda7a438b1e84bdd637b8e1f15e56099f0d64
4a7a96962a07a84582e7d6b352fbce2c29e0b9d573fe0bef23619266e173a2c61fcb127c808a029d831d6485156afbf8e935481293b779ed289cc8d809b4d993a54028b481c59a0b898071edd2c3d294aa7c0f98ec6562153b2a82c1bf1a32261c7eab0c1a2d7b6a05cb850156be09b9bb89dc162fe50e3a661a7a2d25824fefee5337c63f90e5430a02e8ebb2c0e48a5864f85f4b29aebb9441da8013c0249b2cb9be8413c66963db3a096ec
9fc53600f1e91c752546018087081264f98f57e1ba880ece508330103750a039566036c16f86a6da3b85338c3aa6c355c330ff36a1326661923761ac2a6b2e80b90214f90211a089b8052fd4d4fa4178bbcf7c3b782098dbbe9d1218c418f633ee8025c7f9ed1ba040c5403bbbc20e676a225d4c9133a9a833c94fdbdec60d2e2d739f6a113942b3a0412399c0aa035cb9f0a1aa6fc5b4ec2782cd7c9ae5d656a76bde0ea56e75d2b9a04b3da
c0a59efaad11e234e7dcc80b02ee5f656851dc1101a6f2d75fc4f0c1b1ba09b1c186ef704bb3187b4419b3ce00683dbedc7146b93f31bf0b04ed04f59c5a4a031187237f36acc7efa5702ff10e6efe0051a5ec5bf347c632dfb7d00323a6f35a036751f0df93e860ac0eb1d65174a8d928664c6217d03761aac066f1b955c3ef9a0064de56407c0acc03e81a948b3ac18df85c6247e73223a7d48b2305099c437dfa0e7f8721d481b9024cf76
5657d1d43a838d78f01eec49b73a4717495cd7233442a0df04dc77c296703d104fcdc9cb408442051768c62aae155e2b8fcdf50ac5765da01144a8b48b8372679726e650d6af4b333a73f88c130eff3f93f08792ab669cdfa0f70ded9768da142b313b9b91a830e928c89a74936462d78823a1bda9c2bac482a0b46b993f5c9738e9b293c085a5a6a3e1f3a22c28c738bceca00de4379854c993a0a0aa745102e6e7aae3522e3cb55a72a5bfa
b841e6c223f771cd0740a10ff977aa0f5cd83e2b5c5c6b79fdb54a384412775444a401b5c5f64b5cfc5a317a949324ea0f7dcf18b7b0cc7fb3980eea43d7df3228c3d0a305a604f7fc61ce6ffb56b4a9880b90174f90171a0ede2bf02ecd88da88d6eb23b30bee32affb4e206a3122d699f57acb3fcbc1921a05c2c5ef40302db8ae2ba33793578da18c91fb2a1be07764782d696489837713ea0e861fd1a4747de183641126b0c4e49b18c0d
9321c137b89e98af65b2df789dc880a049039cf17d5b10c5a6355cd3766bb857a13dd3a2d4ca31f0ecb5cd0523503c4ba055f2f84cfeb42a6981bba386772cbbd048470e8509ef999c0501f090b5087b63a0dc1a331fee5c523e3077b6df71cc10cc80631f7ff3720f4c3e22acd0cb145a6b8080a0955984e48e939d31f7c6518ced55b79b4abe3f07dc43ecc51addfa174041d9a4a09b46366651f410bec27ecce8466b9badd3d72ea08b9f7
b4a615118512635cc5ba0404996937dadd5be161f8195433c1e1e0ccecdf34990e9622ff4912aa00e30cba03b2a40e49c52dc6999fd1e84cd1d5ff987e3566fdd626a1dd8ef9d0eb664b4e48080a01816c3467ce043d0206896aec665419d8d6c61302c4f4fb3c9fd86898a986cbf80a2e19f204ca060b040ab5450164d6931cc6aa68f61ed9aec900d9a1bb80cbb814635010000000000000000000000000000000000000000000000000000
00000000c001a00fcb22ca3511e33257ed9d8ac3b3dab38ddafa7a1bb8622b393182d854c2553fa03c5e61aee34494995f1182c02f5b67bc19ebf510d1ed4b94ee9c98de43552f70b90c1a02f90c1683028c5d8268ed84600d0e6a84600d0e6c830745df9421561e1c1c64e18ab02654f365f3b0f7509d948180b90ba4fee99b22000000000000000000000000000000000000000000000000000000000000004000000000000000000000000
000000000000000000000000000000000000003e0000000000000000000000000000000000000000000000000000000000000698a00000000000000000000000010007777000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000028c5e0000000000000000000000000000000000000000000000000000000000028c5d00000000000000000000000029c5dc4a469f868df9b799ef
3c282a5883b06c9b000000000000000000000000d90d8e85d0472ebc61267ecbba544252b719745200000000000000000000000029c5dc4a469f868df9b799ef3c282a5883b06c9b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064c2f256035a0000000000
00000000000000000000000000000000000000000000000002fe9a000000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000001a40c6fab82000000000000000000000000000000000000000000000000000000000000008000000000000000000000000029
c5dc4a469f868df9b799ef3c282a5883b06c9b00000000000000000000000029c5dc4a469f868df9b799ef3c282a5883b06c9b00000000000000000000000000000000000000000000000032ee758e35af00000000000000000000000000000000000000000000000000000000000000028c5d000000000000000000000000a4505bb7aa37c2b68cfbc92105d10100220748eb000000000000000000000000000000000000000000000000000
000000000001200000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000005484f5253450000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020486f72736520
546f6b656e2862726964676564f09f8c8831313135353131312900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007a00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000
0000000000000010a6f00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000720f9071db90214f90211a02e91ba3bd063a422cbc28960e743b9448a00effe80042f0e07656e389742041ca0df196dba0aa2426f8c837453c63ddc9114c0e9c4a0bdcd96808a9a63a24112e1a0f43ed1910069311b37e82a60198754127c83d40fa90c06
bd33116b2377ac46b8a0b48c779661a4e26a469e0a6ce74917dcfe480a26618604b94a68a4254c8c3ab1a012068fc2569e3c9c76ac8922c10d66aa9e35a10bc1e872e864fd0c5efe58c0c2a0917821b369c2a0a7b25ded8b3864c3f7ac695b4f371461ba1e7adb64af8e270aa05168fa450fa16b816f66a25fc81ed8aec8edc9c700b384d37888c9ca5333d1e7a056870c34fe499a799e2c17ef1dfd853c8ad899f99ca48c3bccb0314ee6dab
6a9a007ba939ebdbd87b326f21608adc89a1a247fef71303cf6826a152aca6a8530cda0694effd84f6027b4b10482300e8072dced529363d04905d73a5f4cd642fc06e1a00c7732f3ff2b9cc971f13553844c70464e070c6df735f69153aa3955007d9b46a0e35361c314c37ea03a1b8b1f95cdaf057ae219a349566c62423beee12141b72fa0f769d53d52ca93381f3fc079d70736bb31a1fdff72e389108ee05d249f3745d7a0a110c662ae
ffe1a6724b3b3e04c80d18c06dd07ff95c0c2a90af899cdcc9af50a0e5d4c5c2baef9cd629625c5dbac6df2ef305425ffd6d75d149d9108110cb5eaca05344b5be262bc99488b4eeef5c08124254d135d8c44e3b66cbe52d69a9c1dde680b90214f90211a081cf2dd29328b7f941d16ae32a97235de5c52cb67fb7cf506a417e9512d5d92aa0f8c009ebd8872218b3c962ea4b6f26289e74cf5a2699c44638634492ed44061ca04af60fe0d1c
3e5ba311b9096502358214e295ece76fe9a87be787342d291bc1aa02ff67efe95fcbe65bfb6c6a54f7b52481ee9b15a71db428dccbea92a59a7e91ea0ffb9a2121cec680dcc4b906fde38054b8d28c7722f237b8bc4419cb156e00aeea090ff0514d23b6a440883af684314ac252fd40f0965ed00ee32ede850ac939aa6a08316fa9f9fb116b797303c9f59bfcbfd6eab1e860ddce183f8890d39eb463c17a00e68e684671a7a8a6c88caa785
c05b813ed9f9cb899ef52962ec02cc7adfef1ea03d2eb0a315e77755786dce09b9a7a861883aa6a69466bae13ddfd911ecd0b613a0b1f9cd4129e1d3c0cfd65a3acdc95ed70bb369d580a00592d00867f79d049eb0a0c9c8174c3c9894d24438a008430534a85ce6f5e12965405f41fbe6ff1bb8a669a0a463c0ec5eca233abbf82eb463a35847e0b38f6355285ac05dfc699c6bf66f4fa02858c3b04dba4aaa7140e4c817cf3484115b40f65
cfc1ed51f5eca6c4e5e73bea0d7d4321b4be9b929794055ecd81d662771a99af9b580f31fbfc884f33961342fa0099acebc3d3e9ca08b54bab1e77945b0f1e6a9ab8e4809fd4863327e006cf033a0dfbd721474a535c28621da4efaf99bee9ab4b0989cb8b9f4a30be6247304c25e80b90214f90211a0b0d2d5c4a676958902449876e57a7d7d0373aecb55d28892a14b392034ba9085a01421746ecaa897dac65edc34b71fe3f6a229c900fd
86941a0dde67084699e6e6a09828ec53eefb393c136d88d8fc8b8bbfa7979cf5822f37c326a3e7a4a8047b91a0d454122dab270d9106f446a27fe1235ba1930fb467f2fbab68ebad587de5c0efa055596df55d96535c518071b46a67e9a56d25174cf8629e7aa2b9fc25fa1a795fa0ef1a3b1f06234e59ee8c92404025cf4ae063e8d7a83835c189c0f7063a689ac7a068647f05fcfc7b6a3a34435176678368109b861a9be21d339a4efaa9a
2a49cada03fffe48a29bc1d6335423a77388094d15c54689429dbb445a2c7b205c6deb0b3a0656784a80e38362d1424a7c97c0aea7d7f10a43a3da27228726a3501e7054763a0c2d8e59eebc63b9bf20d7c1ca2be444111f49f2b3802249bf87dbbfe76072346a0f5e80b2292329d5922bb9c926d33f2e1f308fdf2202a3fa93950f8e3628afc44a0820493552c43d7b79475a3c4c720fe030a961be2cf6e2a343bfbec909e895f2ea0d21d28
ef968c3d14ce7f7f456eacea2f163313df6df0145181bda24a12cf8d8fa0cc445061fd2a22b68c590681ecb52cf6abe13afabde76b0df15ebdd21f79822ba09eef3ea4c3cbad8d77e54c7e6bdc03bb406ad0d501742f33aab2d3b9782a2bf5a0b436a4f34544960ad4545a0760ed2d5519c4e413a0af60ecbcbdb439d181e68280b8b3f8b18080808080a0345dac53487bff09defa9a5894cf8ff04e4f7390d18d17779bcfe8eafa3bc74ea0b
8c36ec6fa66edeb8557929858a16c86f6a027f1843f5399282db105df7988278080a04463b1d7cd89abc0054414f5e66107f48c97c3341ca119d8cd98004db57f645b80a083268794c12b977c3cff03ced269da686fdbd1169010002d8465575f2200cc6ba029212eeb3882b50ee5214a82a9e3a6cc8dd94fb74d35ab07f9f14073fbf2c68f80808080a2e19f201a96f26850083be3eb4352f2a4d9ee663b34ff797c0817a6cacf769f989201
c080a0ef89ebf8d4da89e1a1497203b8e81495139b8f7645247077ba1be5445f6f68b9a046e3a2cd4cef08383e3085c550f0af2e2402c66378ed9e36f3203dc93ea90a5cb90b5a02f90b5683028c5d8268ee84600d0e6a84600d0e6c8306cc7f9421561e1c1c64e18ab02654f365f3b0f7509d948180b90ae4fee99b2200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000
000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000698b00000000000000000000000022c429580619627f61d75bcccd2d7c831c1f1cc90000000000000000000000000000000000000000000000000000000000028c5e0000000000000000000000000000000000000000000000000000000000028c5d00000000000000000000000022c429580619627f61d75bcccd2d7c83
1c1f1cc900000000000000000000000022c429580619627f61d75bcccd2d7c831c1f1cc900000000000000000000000022c429580619627f61d75bcccd2d7c831c1f1cc9000000000000000000000000000000000000000000000000008e1bc9bf04000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005270f4d202be000000000000000000
000000000000000000000000000000000000000000222e000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000008a000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000010a6f00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000816f90813b90214f90211a02e91ba3bd063a422cbc28960e743b9448a00effe80042f0
e07656e389742041ca0df196dba0aa2426f8c837453c63ddc9114c0e9c4a0bdcd96808a9a63a24112e1a0f43ed1910069311b37e82a60198754127c83d40fa90c06bd33116b2377ac46b8a0b48c779661a4e26a469e0a6ce74917dcfe480a26618604b94a68a4254c8c3ab1a012068fc2569e3c9c76ac8922c10d66aa9e35a10bc1e872e864fd0c5efe58c0c2a0917821b369c2a0a7b25ded8b3864c3f7ac695b4f371461ba1e7adb64af8e27
0aa05168fa450fa16b816f66a25fc81ed8aec8edc9c700b384d37888c9ca5333d1e7a056870c34fe499a799e2c17ef1dfd853c8ad899f99ca48c3bccb0314ee6dab6a9a007ba939ebdbd87b326f21608adc89a1a247fef71303cf6826a152aca6a8530cda0694effd84f6027b4b10482300e8072dced529363d04905d73a5f4cd642fc06e1a00c7732f3ff2b9cc971f13553844c70464e070c6df735f69153aa3955007d9b46a0e35361c314c
37ea03a1b8b1f95cdaf057ae219a349566c62423beee12141b72fa0f769d53d52ca93381f3fc079d70736bb31a1fdff72e389108ee05d249f3745d7a0a110c662aeffe1a6724b3b3e04c80d18c06dd07ff95c0c2a90af899cdcc9af50a0e5d4c5c2baef9cd629625c5dbac6df2ef305425ffd6d75d149d9108110cb5eaca05344b5be262bc99488b4eeef5c08124254d135d8c44e3b66cbe52d69a9c1dde680b90214f90211a0cdd40a7ebd01
4a307ba2a627a1d3e2ef9f6f7852e98534715eb09e61321a4934a05e4a29c1adeeca8a2d36cd912e4cc715a210e068c0bd67e2c8a44de38d7d407da0cbbc87cf32d9a153f62819ea92f1188ff3e9fbe2ca40c6a8d7498ff6d4115916a06ae9659f26c4a3d5796ee263396fb28d528a060af871d212a97d3c5245b796a2a04f5fef21e00d2eb952108678e07a423e34748705d67363576be4b455ee5dfb9aa047b2d4ed3a766dc56d620027ce3
64fdc880ef7b12ff78a2f61b1a6afdd0a1acca0ac6bddc294e5e710db898ac3a4a62c825f61142992a6ed3fcca00ad3b649fe93a08f3d71c761f604f7835b26ea6eb41a71bbeaa609715cf27f0745491c332742c1a081f6f5ccfd912ef70ecbf606a91bfd03ec74323323be721d5cd5d66156dcdda1a06972566ce4c8d69ae535d090c72311efa7ddb6064bd2a9487ae45b3c78f99148a02f687e4a6e431b15d3e0d6281fda3e7a0d4038d7f5
3fcf59461317a5e23d621aa01b7f07516344b72c99cde59cc59049c3553db9129d399bf4d6885778427d7215a00f3815d21ab329fd7636a7f1422b5c3b19fdc51f585dcb2e291f67bbcfdaf5eaa02d8d5306d18e837f0caaeda229c24fe5c5fe31b6622491dee85e21fe5ab72ee8a02c114fc4e3923d46c1d07494d65cc62e0483f70cea3e934a31ba4cfe885aebd7a0842f3b4c683a1fcdc57ecbad7d70995914ea470a3148c95ce60c97252
4b09a2b80b90214f90211a045d6cec8dd7cc2ecf5a8ce7278b71aa56ce8f3ea566b9af5899e83df411da2e7a0b2cc5fba5f31b928757ace54e04dcc46443b776751e4c9fe1a19eb30f035e065a0a6e6539f685ade5f34116ff819a0ffc3d769e23749372629c06b0493caa54ca7a0752ea6242000fdafde3b47d85f0e9c8166d135832e333a86775cfea9bdcd0c97a0570c2f89e0ce37aa8f947d1f9cae3fd4d10617daa2dbbe3a85f1cc452f
4abb4ea01e2582053f4ae20732d4d18044a441aa283dbb0cc26bcaca7f3666c9fda300cea0e291cacef65204a646e05bb36aca744b9ea87ba8357442cd5af25e90fca1022fa0b0f1ea39d495feed3888b5fc2118d8766bee7ecdf978373a46f7a8857aedc909a05e70d2fff0724f77de19b78f9462dbf7fbb824730d1abd116cca34936e29f594a04240edf666de69880b7ac230b185d20596b987f50f5202e19fcffd5b5926d832a0c26d982
3f4b277d29d8c5494631d1aeabec6461992178f6fb78cf9764948012aa03dc1a4bda5430094c591a487afbbefe8c33756e1b39c1eaee81971cd7ca6cfc3a04515476d681f79322163b06a1243b75ffb6c8f4d0deeb4a64b9c5a4199e929bda0349cac3ef2e39974446132d888676c983290359baa893d98e12ebe73e46b8da4a022c790be815b0215edfbf01cab83391fca2d8e81ccbea9575cbcbdab961da10fa0e80a2b2a8256dbbcde9561
fb11a191edaff8ce9e69f223d86be533eb373b85d480b90114f9011180a003ea0aab6f62dcf3f1eeccd4f70e5aadf752e5030cf806a58fde83d17b6e1323a07ed79644d39d31bfb1582915078e8c427ca26dbf3d8167dc0ad6a42963a37859a09e48e7d5925881434ef958647233def772e2b39a36d47e68c6aceb3181f34e49a0c6addff1ce4f9354c2be4200a8e10b4748a48462959c57ffb5b9769667ee2460808080a075ed424cbb60329
83e16a30c67b8b7df2573491c95ffa5bf240c554ee9ddd00980a09e8cf420ae99f3fa10c5427ee835c499c503f74683948e12d578860e1e2c927aa057a4091fcb0911d6e3050b3700a01fb94aceb63137ee87f7fabfc2ed6267d2cb8080a0eb7ea99c10d3c90d5a252680b052dce29c938c357345bba314da30587a0826ea8080b893f89180808080808080808080a0b842c237285aaa9debbd2c02d3a96540434122623f15552daa3023f826
6389c280a059362d5238382f58bbcab34d8525de14b4ffc6dd807dba95cd9c13f8601b6325a0e6f4d4cd6ac172307c58eaf9c8ef05e71288554dded9ce66e411e3d250b8a96ba0271b0355df1a6f4f2c6f352849f90f06ae24b0972a8a83725c221afab09da9498080a1e09e32f8bded833e6a33b54aed636acf88616e69dc88ff7465a1806c068811280100000000000000000000c001a071dc8f450e148d09ce39f896c57de3675afcf074d
e3ed94057d1b0d06231c6eda0769414d2abd332eb3abe5ff8f94354916707c57b67c11afd51cefd8292f09ff8b9019f02f9019b83028c5d03845a5fd7d3845a5fd7d483040ab79410007777000000000000000000000000000000028702d79883d20000b90124ee1490b20000000000000000000000000000000000000000000000000000000000aa36a7000000000000000000000000bdb37363180305913139b25831fb3664f11ca9200000
000000000000000000006302744962a0578e814c675b40909e64d9966b0d0000000000000000000000000000000000000000000000015af1d78b58c4000000000000000000000000000000000000000000000000000000000000002fe9a00000000000000000000000000000000000000000000000000002d79883d20000000000000000000000000000bdb37363180305913139b25831fb3664f11ca92000000000000000000000000000000
000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000c080a0dca0234f24a642a43ef51405bc63858e55b074dfd4b2b086359db57a0c9b1407a039702b813a9f77ab6ae6914cf2c486ccf9e245572d7b556034eca6624de296e1b8b502f8b283028c5d058459682f008459682f0182b614946302744962a0578e814c675b40909e64d9966b0d80b844095ea7b300000000
0000000000000000501f63210ae6d7eeb50dae74da5ae407515ee246ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc080a06b12f4c21c26fee794db3769133c8de61a5bc1abcf1fa17d71d9cccca4adbf90a00e5fab3de2270be7b61a1bb5fce791a9964c63c641357016c1b9bcd2df35f5cdb9015e02f9015a83028c5d0a8459682f008459682f0183021ed194501f63210ae6d7eeb50dae74da5ae407515
ee24687038d7ea4c68000b8e47ff36ab5000000000000000000000000000000000000000000000000543e4dfa91cf9bb1000000000000000000000000000000000000000000000000000000000000008000000000000000000000000020d6c47eb0fec3814340fbd9e8205e18650eab470000000000000000000000000000000000000000000000000000000064c27d5e00000000000000000000000000000000000000000000000000000000
000000020000000000000000000000001017f42d1d3e7d490ea3cc4c95591c339ba71ac5000000000000000000000000a4505bb7aa37c2b68cfbc92105d10100220748ebc001a0e08c770ea67c90482c1979012a9d8d2df6ad3b7ef35daf683c35aee43a82cf00a0411d8c1277c9c40e958c015dcb1b5a6dee278920a7351b0cc988c58e84a2c887b8b502f8b283028c5d328459682f008459682f01827174946302744962a0578e814c675b4
0909e64d9966b0d80b844095ea7b300000000000000000000000010007777000000000000000000000000000000020000000000000000000000000000000000000000000000135541deabf44f6902c001a068108a0e7faeb0a2b420b980f9d6303d8004f6fbdfed61acf31340ada1acd60ba01c238069bbab8d81718624715691406a6946d63a2dcc9a614a850b5c9dceb998b8b502f8b283028c5d1d8459682f008459682f0182b4b8947b1a
3117b2b9be3a3c31e5a097c7f890199666ac80b844095ea7b3000000000000000000000000501f63210ae6d7eeb50dae74da5ae407515ee24600000000000000000000000000000000000000000000000000000000000b4801c080a07c21aae4318c817c8853f35560302ca83a6166bd1f92111f0b86b256aa213d13a04db98b7d01383ff2fb3435905b545c01182045c80e68380e66eaf47773c5d27e").unwrap();
        assert_eq!(txlist_bytes, expected_txlist_bytes);
    }

    fn test_super_circuit(block: &Block<Fr>) {
        let circuit = SuperCircuit::new_from_block(block);
        let instance = circuit.instance();
        // TODO: fix k from build
        let k = 23;
        let prover = MockProver::run(k, &circuit, instance).unwrap();
        let res = prover.verify_par();
        if let Err(err) = res {
            error!("Verification failures: {:#?}", err);
            panic!("Failed verification");
        }
    }

    #[tokio::test]
    async fn test_get_anchor_tx() {
        let block_num = 10;
        let cli = get_client();
        let block = cli
            .get_block_by_number(BlockNumber::from(block_num))
            .await
            .unwrap();
        println!("block: {:?}", block);
        let anchor = filter_anchor_tx(&block);
        let anchor_info = get_anchor_tx_info(&anchor);
        println!("anchor_info: {:?}", anchor_info);
    }

    #[tokio::test]
    async fn test_pure_anchor_block() {
        let block_num = 10;
        let cli = get_client();

        let circuits_params = CircuitsParams {
            max_txs: 80,
            max_calldata: 69750,
            max_bytecode: 139500,
            max_rws: 3161966,
            max_copy_rows: 5952002,
            max_exp_steps: 27900,
            max_evm_rows: 0,
            max_keccak_rows: 0,
        };

        let protocol_instance = ProtocolInstance {
            meta_data: MetaData {
                id: 10,
                timestamp: 1694510352,
                l1_height: 4272887,
                l1_hash: parse_hash(
                    "6e3b781b2d9a04e21ecba49e67dc3fb0a8242408cc07fa6fed5d8bd0eca2c985",
                )
                .unwrap(),
                l1_mix_hash: parse_hash(
                    "0000000000000000000000000000000000000000000000000000000000000000",
                )
                .unwrap(),
                deposits_processed: parse_hash(
                    "56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",
                )
                .unwrap(),
                tx_list_hash: parse_hash(
                    "569e75fc77c1a856f6daaf9e69d8a9566ca34aa47f9133711ce065a571af0cfd",
                )
                .unwrap(),
                tx_list_byte_start: 0,
                tx_list_byte_end: 0,
                gas_limit: 820000000,
                beneficiary: parse_address("0000777700000000000000000000000000000001").unwrap(),
                treasury: parse_address("df09A0afD09a63fb04ab3573922437e1e637dE8b").unwrap(),
            },
            block_hash: parse_hash(
                "c32ce5789b5ae9b2a3921e43fb16c429abcb520acf5e27dc717a9caf46c4319f",
            )
            .unwrap(),
            parent_hash: parse_hash(
                "a534f7f74d155fa0575ccfd9dbb2a7c4f89baa0fb48c3a312f0d97e3fbff7c47",
            )
            .unwrap(),
            signal_root: parse_hash(
                "95a87577b110954a0daf867bd574aa726ec9a061b4bf0903d5adef23872f7f1b",
            )
            .unwrap(),
            graffiti: parse_hash(
                "6162630000000000000000000000000000000000000000000000000000000000",
            )
            .unwrap(),
            prover: parse_address("70997970C51812dc3A010C7d01b50e0d17dc79C8").unwrap(),
            gas_used: 141003,
            parent_gas_used: 123960,
            block_max_gas_limit: 6000000,
            max_transactions_per_block: 79,
            max_bytes_per_tx_list: 120000,
            l1_signal_service: parse_address("1000777700000000000000000000000000000001").unwrap(),
            l2_signal_service: parse_address("1000777700000000000000000000000000000001").unwrap(),
            l2_contract: parse_address("1000777700000000000000000000000000000001").unwrap(),
            anchor_gas_limit: 180000,
        };

        let cli = BuilderClient::new(cli, circuits_params, Some(protocol_instance.clone()))
            .await
            .unwrap();

        let (builder, _) = cli.gen_inputs(block_num).await.unwrap();

        log::info!("test super circuit, block: #{}", block_num);
        let mut block = block_convert(&builder.block, &builder.code_db).unwrap();
        block.randomness = Fr::ONE;
        block.protocol_instance = Some(protocol_instance);

        test_super_circuit(&block);
    }

    // #[tokio::test]
    // async fn test_single_sepolia_txlist_call() {
    //     let block_num = 3974689;
    //     let cli = get_client();
    //     let block = cli
    //         .get_block_by_number(BlockNumber::from(block_num))
    //         .await
    //         .unwrap();
    //     let proposal_txs = filter_proposal_txs(&block);

    //     for tx in proposal_txs {
    //         let txlist_bytes = get_txlist_bytes(&tx);
    //         assert_eq!(run_rlp_circuit_for_valid_bytes(&txlist_bytes), Ok(()));
    //     }
    // }

    // #[tokio::test]
    // #[tokio::test]
    // async fn test_single_sepolia_txlist_call() {
    //     let block_num = 3974689;
    //     let cli = get_client();
    //     let block = cli
    //         .get_block_by_number(BlockNumber::from(block_num))
    //         .await
    //         .unwrap();
    //     let proposal_txs = filter_proposal_txs(&block);

    //     for tx in proposal_txs {
    //         let txlist_bytes = get_txlist_bytes(&tx);
    //         assert_eq!(run_rlp_circuit_for_valid_bytes(&txlist_bytes), Ok(()));
    //     }
    // }

    // #[tokio::test]
    // async fn test_all_sepolia_txlist_calls() {
    //     let begin_block_num: u64 = match env::var("SEPOLIA_BLOCK_NUM") {
    //         Ok(val) => {
    //             println!("Begins with {:?}", val);
    //             val.parse().unwrap()
    //         }
    //         _ => 3980000u64,
    //     };

    //     let cli = get_client();
    //     for block_num in begin_block_num..begin_block_num * 2 {
    //         print!("running block {} ", block_num);
    //         io::stdout().flush().unwrap();
    //         let block = cli
    //             .get_block_by_number(BlockNumber::from(block_num))
    //             .await
    //             .unwrap();
    //         let proposal_txs = filter_proposal_txs(&block);

    //         println!("which has {} proposal txlists...", proposal_txs.len());
    //         for (i, tx) in proposal_txs.iter().enumerate() {
    //             let txlist_bytes = get_txlist_bytes(&tx);
    //             print!("  running {} tx {:?} ... ", i, tx.hash);
    //             io::stdout().flush().unwrap();
    //             assert_eq!(run_rlp_circuit_for_valid_bytes(&txlist_bytes), Ok(()));
    //             println!("succed!");
    //         }
    //     }
    // }
}
